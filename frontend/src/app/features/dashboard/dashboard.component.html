<div class="dashboard">

  <aside class="sidebar">
    <h2 class="logo">Météo</h2>

    <nav>
      <a class="active">Dashboard</a>
    </nav>
  </aside>

  <main class="content">

    <header class="topbar">
      <input type="text" [(ngModel)]="city" placeholder="Rechercher une ville..." class="search">
      <button class="btn" (click)="searchCity()">Rechercher</button>
    </header>

    <section class="cards">

      <!-- Résultats de recherche -->
      <div class="card large">
        <h3> Résultats de recherche</h3>
        <ul class="city-list">
          <li *ngFor="let c of searchResults" (click)="selectCity(c)">
            {{ c.name }} ({{ c.country }}) — {{ c.lat }} / {{ c.lon }}
          </li>
        </ul>
      </div>

      <!-- Météo actuelle -->
      <div class="card weather" *ngIf="weather">
        <h3> Météo actuelle : {{ weather.city }}</h3>

        <div class="weather-info">
          <div>
            <h1>{{ weather.temp }}°C</h1>
            <p>{{ weather.description }}</p>
          </div>
        </div>

        <div class="details">
          <p><strong>Humidité :</strong> {{ weather.humidity }}%</p>
          <p><strong>Vent :</strong> {{ weather.wind }} m/s</p>
          <p><strong>Ressenti :</strong> {{ weather.feels_like }}°C</p>
        </div>
      </div>

      <!-- Prévisions -->
      <div class="card" *ngIf="forecast?.length">
        <h3>Prévisions</h3>
        <ul class="forecast">
          <li *ngFor="let f of forecast">
            {{ f.time }} — {{ f.temp }}°C
          </li>
        </ul>
      </div>

      <!-- Qualité de l'air -->
      <div class="card" *ngIf="airQuality">
        <h3> Qualité de l'air</h3>
        <p><strong>AQI :</strong> {{ airQuality.aqi }}</p>
        <p><strong>PM2.5 :</strong> {{ airQuality.pm25 }}</p>
        <p><strong>PM10 :</strong> {{ airQuality.pm10 }}</p>
        <p><strong>Ozone :</strong> {{ airQuality.ozone }}</p>
      </div>

    </section>

  </main>

</div>
